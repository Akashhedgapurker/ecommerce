<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
<style>
    #products{
        display: flex;
        border: 1px solid black;        
    }
    h2{
        display: flex;
        justify-content: flex-end;
    }
    div>img{
        height: 200px;
        width: 200px;
    }
    #products>div{
        border: 1px solid red;
        padding: 10px;
        height: auto;
        width: 200px;
        margin: 10px;
    }
</style>
</head>
<body>
    <h2 id="count">product count: </h2>
    <div id="products"></div>
</body>
</html>

<script>
    function append(){
    let productsarr=JSON.parse(localStorage.getItem("products")) || [];


    productsarr.forEach(function (element, index){
        

        let div = document.createElement("div");

        let count = document.getElementById("count");
        count.innerText= "Product Count: " + productsarr.length;

        let img = document.createElement("img");
        img.src=element.image;

        let p1 = document.createElement("p");
        p1.innerText=element.name;

        let p2 = document.createElement("p");
        p2.innerText=element.category;

        let p3 = document.createElement("p");
        p3.innerText=element.price;

        let p4 = document.createElement("p");
        p4.innerText=element.gender;

        let p5 = document.createElement("p");
        p5.innerText=element.sold;

        let btn = document.createElement("button");

        btn.innerText = "Remove";
        btn.addEventListener("click", function (){

        remove(index) 
        
        });

        div.append(img, p1, p2, p3, p4, p5, btn);
        let container = document.getElementById("products");
        container.append(div);
        
        
        
    });
}

append();

function remove(index){
    let productsarr=JSON.parse(localStorage.getItem("products")) || [];

    let newproductsarr=productsarr.filter(function (el, i){
        if(i == index){
            let trash = JSON.parse(localStorage.getItem("products")) || [];
            trash.push(el);
            localStorage.setItem("trash", JSON.stringify(trash));
        }
        else{
        return i !== index;
        }
    });
    localStorage.setItem("products", JSON.stringify(newproductsarr));
    append();

    window.location.reload();
    };

</script>